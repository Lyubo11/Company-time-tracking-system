<!DOCTYPE html>
<html lang="en" xmlns:th="http://www.thymeleaf.org"
xmlns:sec=https://www.thymeleaf.org/thymeleaf-extras-springsecurity5>
<head>
    <meta charset="UTF-8">
    <title>Manage Users</title>
    <link rel="stylesheet" th:href="@{/fontawesome/all.css}">
    <link rel="stylesheet" th:href="@{/css/style.css}">
    <link rel="stylesheet" th:href="@{/css/bootstrap.min.css}">
    <script type="text/javascript" th:src="@{/js/bootstrap.min.js}"></script>
<!--    <link crossorigin="anonymous" href="https://cdn.jsdelivr.net/npm/bootstrap@5.2.3/dist/css/bootstrap.min.css"-->
<!--          integrity="sha384-rbsA2VBKQhggwzxH7pPCaAqO46MgnOM80zW1RWuH61DGLwZJEdK2Kadq2F9CUG65" rel="stylesheet">-->
<!--    <style>-->
<!--        thead {-->
<!--            color: darkblue;-->
<!--            background-color: darkgray;-->
<!--        }-->
<!--    </style>-->
<body>
<div>
    <h1>Users Info</h1>
</div>
<div class="alert alert-success text-center" th:if="${message!=null}">
    [[${message}]]
</div>

<div>
    <table class="table table-responsive">
        <thead class="table-dark">
        <tr>

            <th>User</th>
            <th>Project</th>
            <th>Customer</th>
            <th>Contract expiry</th>
            <th>Actions</th>
        </tr>
        </thead>
        <tbody>
        <tr th:each="user,ind:${listUsers}">
            <td>[[${user.firstName}]]</td>
            <td>
                <ul>
                    <li th:each="project : ${user.projectList}" th:text="${project.projectName}"></li>
                </ul>
            </td>
            <td>
                <ul>
                    <li th:each="project : ${user.projectList}" th:text="${project.customer.name}"></li>
                </ul>
            </td>
            <td>
                <ul>
                    <li th:each="project : ${user.projectList}" th:text="${project.customer.contractExpiration}"></li>
                </ul>
            </td>

            <td sec:authorize="hasAuthority('Admin')">
                <a class="fa-solid fa-pen-to-square icon-green fa-2x"th:href="@{'/users/edit/' + ${user.id}}"
                   title="Edit User"></a>
                &nbsp;
                <a class="fa-solid fa-trash icon-dark fa-2x link-delete" th:href="@{'/users/delete/' + ${user.id}}"
                   th:userId="${user.id}"
                   title="Delete User"></a>
            </td>
        </tr>
        </tbody>
    </table>
</div>

</body>
</html>